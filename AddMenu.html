<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Menu</title>
  <link rel="shortcut icon" href="images/FoodLogo.png" type="image/x-icon">
  <link rel="stylesheet" href="css/Font.css" />
  <link rel="stylesheet" href="css/NoFilterHead.css" />
  <style>
    /* styles.css */
    body {
  margin: 0;
  padding: 0;
}

header {
  background-color: #16a290;
  color: #fff;
  position: fixed;
  width: 100%;
  z-index: 100;
  top: 0;
}

.heading {
  display: flex;
  align-items: center;
  gap: 5px;
}
#ChatBot-Box{
    visibility: hidden;
}
.form-container {
  background-color: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  width: 100%;
  margin: 38px auto;
  box-sizing: border-box;
  margin-top: 70px;;
}
.form-container h2 {
    text-align: center;
    margin-bottom: 20px;
    background-color: #16a290;
    padding: 10px;
    border-radius: 5px;
    color: white;
  }
.form-group {
  margin-bottom: 15px;
  width: 100%;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
}

.form-group input,
.form-group textarea {
  width: 100%;
  padding: 8px;
  border-radius: 4px;
  border: 1px solid #ccc;
  box-sizing: border-box; 
}

.form-group button {
  padding: 12px 15px;
  background-color: #16a290;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  width: 100%;
  margin-top: 10px;
}

.form-group button:hover {
  background-color: #218838;
}

#menuForm{
  border: 1px solid lightgray;
  padding: 10px;
  border-radius: 20px;

}
  </style>
</head>

<body class="poppins-regular">
  <header>
    <nav class="poppins-regular">
        <div class="logo">
            <div class="navlogo">
                <img width="30" src="images/logo.png" alt="Logo">
                <span>KhanaDotCom</span>
            </div>

            <div class="signlog">

                <!-- Restaurant Owner Dashboard -->
                <button class="restaurant-owner-links poppins-regular">Dashboard</button>

                <button class="login loginButton"><a href="login.html">LogIn</a></button>
                <div class="signupdrop">
                    <button class="signup-toggle" id="signup-toggle">SignUp</button>
                    <ul id="sign-menu" class="sign-menu">
                        <li><a href="customer.html">Customer</a></li>
                        <li><a href="deliverylogin.html">Delivery Person</a></li>
                        <li><a href="restaurantlogin.html">Restaurant</a></li>
                    </ul>
                </div>
                <div class="dropdown">
                    <button class="menu-toggle" id="menu-toggle"><svg xmlns="http://www.w3.org/2000/svg"
                            height="24px" viewBox="0 -960 960 960" width="24px" fill="#fff">
                            <path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z" />
                        </svg></button>
                    <ul id="nav-menu" class="mobile-menu">
                        <li><a href="index.html"><img src="images/Home.png" alt="">Home</a> </li>
                        <li><a href="menu.html"><img src="images/Menu.webp" alt="">Menu</a> </li>
                        <li>
                            <div class="cart-box">
                                <img src="images/Cart.png" alt="Cart">
                                <div class="item-In-Cart" id="itemincart">0</div>
                            </div>
                            <a href="cart.html">Cart</a>
                        </li>
                        <li><a href="OrderHistory.html"><img src="images/Order.png" alt="">Orders</a> </li>
                        <li><a href="profile.html"><img src="images/Profile.jpg" alt="">Profile</a> </li>
                        <li><a href="t&c.html"><img src="images/Help.webp" alt="">Help/Support</a> </li>
                        <li><a href="login.html"><img src="images/Login.png" alt="">
                                <div class="loginButton">Login</div>
                            </a>
                        </li>
                        <li><a href="poll.html"><img src="images/Login.png" alt="">Poll</a> </li>
                    </ul>

                </div>
            </div>
        </div>
    </nav>
</header>

      <!-- Restaurant-Owner-Dashboard  -->
      <div class="restaurant-dashboard">
        <div class="close-dash-cont">
            <div class="first">--</div>
            <div>Dashboard</div>
            <span class="close-dash">&times;</span>
        </div>
        <div class="add-buttons-cont">
            <button class="add-res poppins-regular"><a href="AddRes.html">Add Restaurant</a></button>
            <button class="add-menu poppins-regular"><a href="AddMenu.html">Add Menu</a></button>
        </div>
    </div>

  <div class="form-container main-content ">
    <h2>Add Menu Item</h2>
    <form id="menuForm">
      <div class="form-group">
        <label for="name">Name<span class="required">*</span></label>
        <input type="text" id="name" name="name" required />
        <small class="error-message" id="nameError"></small>
      </div>
      <div class="form-group">
        <label for="description">Description<span class="required">*</span></label>
        <textarea id="description" name="description" required></textarea>
        <small class="error-message" id="descriptionError"></small>
      </div>
      <div class="form-group">
        <label for="price">Price<span class="required">*</span></label>
        <input type="number" step="0.01" id="price" name="price" required />
        <small class="error-message" id="priceError"></small>
      </div>
      <div class="form-group">
        <label for="preparation_time">Preparation Time<span class="required">*</span></label>
        <input type="text" id="preparation_time" name="preparation_time" required />
        <small class="error-message" id="preparationTimeError"></small>
      </div>
      <div class="form-group">
        <label for="menu_item_pic">Menu Item Picture</label>
        <input type="file" id="menu_item_pic" name="menu_item_pic" accept="image/*" class="poppins-regular" />
        <small class="error-message poppins-regular" id="menuItemPicError"></small>
      </div>
      <div class="form-group">
        <label for="restaurant_id">Restaurant ID<span class="required">*</span></label>
        <input type="number" id="restaurant_id" name="restaurant_id" required />
        <small class="error-message" id="restaurantIdError"></small>
      </div>
      <div class="form-group">
        <button type="submit" id="submitBtn" class="poppins-regular">Add Menu Item</button>
      </div>
      <div id="loading" class="loading" style="display: none;">Submitting...</div>
    </form>

    <!-- Logout Popup -->
    <div id="logoutPopup" class="popup">
      <div class="popup-content">
        <p>Do you really want to logout?</p>
        <button id="confirmLogout" class="poppins-regular">Yes</button>
        <button id="cancelLogout" class="poppins-regular">No</button>
      </div>
    </div>

  </div>
  <script src="js/auth.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const menuForm = document.getElementById("menuForm");
      const submitBtn = document.getElementById("submitBtn");
      const loadingIndicator = document.getElementById("loading");

      menuForm.addEventListener("submit", async (e) => {
        e.preventDefault();


        submitBtn.disabled = true;
        loadingIndicator.style.display = "block";

        const formData = new FormData(menuForm);
        const token = localStorage.getItem("accessToken");

        if (!token) {
          alert("No access token found. Please log in.");
          window.location.href = "login.html";
          return;
        }

        try {
          const response = await fetch("https://khanadotcom.in:8000/add-menu-items/", {
            method: "POST",
            headers: {
              Authorization: `Bearer ${token}`,
            },
            body: formData,
          });

          const result = await response.json();
          console.log(result);


          if (response.ok) {
            alert("Menu item added successfully!");
            menuForm.reset();
          } else {
            const errorMessage = result.error || "An unexpected error occurred.";
            alert(`Failed to add menu item: ${errorMessage}`);
          }
        } catch (error) {
          alert(`An error occurred: ${error.message}`);
        } finally {
          // Re-enable submit button and hide loading indicator
          submitBtn.disabled = false;
          loadingIndicator.style.display = "none";
        }
      });
    });

  </script>
</body>

</html>

<!-- // details.js

document.addEventListener('DOMContentLoaded', async function () {
    try {
        // Extract the item ID from the URL parameters
        let urlParams = new URLSearchParams(window.location.search);
        let itemID = urlParams.get('id');

        if (itemID) {
            // Fetch the data from the JSON file
            let response = await fetch('js/FoodData.json');

            if (!response.ok) {
                let errorText = await response.text();
                throw new Error('Fetch error: ' + errorText);
            }

            let data = await response.json();
            console.log(data);

            // Find the item with the matching ID
            const itemIDNumber = Number(itemID);
            const itemData = data.find(item => item.id === itemIDNumber);
            
            console.log(itemData);
            

            if (itemData) {
                const itemDetailsCont = document.getElementById('item-details');
                
                // Construct HTML for the item details
                let itemDetails = `
                    <div class="restaurant-item">
                        <img src="${itemData.imageUrl}" alt="${itemData.name}" />
                        <div class="item-data">
                            <h3>${itemData.name}</h3>
                            <p>${itemData.location}</p>
                            <p>Opens at ${itemData.openingTime}</p>
                            <p>Min. Order: ${itemData.minimumOrder} | Delivery Fee: ${itemData.deliveryFee}</p>
                            <p><strong>Delivery: ${itemData.discounts.delivery} | Collection: ${itemData.discounts.collection}</strong></p>
                        </div>
                    </div>
                  
                    `;
                
                // Set the HTML content of the item-details container
                itemDetailsCont.innerHTML += itemDetails;
            } else {
                console.error('Item not found');
                document.getElementById('item-details').innerText = 'Item not found';
            }
        } else {
            console.error('No item ID provided');
            document.getElementById('item-details').innerText = 'No item ID provided';
        }
    } catch (error) {
        console.error('Error occurred: ' + error.message);
        document.getElementById('item-details').innerText = 'An error occurred while fetching item details';
    }
}); -->